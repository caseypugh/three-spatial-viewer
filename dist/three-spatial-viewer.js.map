{"version":3,"file":"three-spatial-viewer.js","sources":["../src/components/uniforms.ts","../src/components/constants.ts","../src/components/player.ts"],"sourcesContent":["export const Uniforms = {\n  colorTexture: {\n    value: null\n  },\n  quiltRows: {\n    value: 0,\n  },\n  quiltColumns: {\n    value: 0,\n  },\n  quiltViewWidth: {\n    value: 0,\n  },\n  quiltViewHeight: {\n    value: 0,\n  },\n  quiltAngle: {\n    value: 0,\n  },\n  quiltStereoEyeDistance: {\n    value: 0,\n  },\n}\n","enum SpatialType {\n  // MONO = 0,\n  // STEREO = 1,\n  LOOKING_GLASS\n}\n\nenum StereoMode {\n  OFF,\n  COLOR ,\n  RED_CYAN,\n  DIFFERENCE,\n  LEFT_RIGHT,\n}\n\nclass QuiltConfig {\n  public angle: number = 0\n  public stereoEyeDistance: number = 8\n  public rows: number = 8\n  public columns: number = 8\n  public width: number = 480\n  public height: number = 640\n}\n\nclass Props {\n  public spatialType: SpatialType = SpatialType.LOOKING_GLASS\n  public quilt: QuiltConfig = null\n  public stereoMode: StereoMode = StereoMode.COLOR\n}\n\nexport { QuiltConfig, SpatialType, StereoMode, Props }","import {\n  Object3D,\n  ShaderMaterial,\n  Mesh,\n  PlaneBufferGeometry,\n  Texture,\n  RGBFormat,\n  FrontSide,\n  RepeatWrapping\n} from './three'\n\n// @ts-ignore\nimport frag from '../shaders/spatial.frag'\n// @ts-ignore\nimport vert from '../shaders/spatial.vert'\n\nimport { Uniforms } from './uniforms'\nimport { Props, QuiltConfig, SpatialType, StereoMode } from './constants'\n\nexport default class Player extends Object3D {\n\n  private props: Props = new Props()\n\n  private static geometry: PlaneBufferGeometry\n\n  private material: ShaderMaterial = new ShaderMaterial({\n    uniforms: Uniforms,\n    vertexShader: vert,\n    fragmentShader: frag,\n    transparent: true,\n    side: FrontSide,\n  })\n\n  constructor(texture: Texture, depth?: Texture, props?: Props) {\n    super()\n\n    /** Assign the user provided props, if any */\n    this.setProps(this.props, props)\n\n    /** Add the compiler definitions needed to pick the right GLSL methods */\n    this.setShaderDefines(this.shaderDefines)\n\n    /**\n     * Create the geometry only once, it can be shared between instances\n     *  of the viewer since it's kept as a static class member\n     **/\n    if (!Player.geometry) {\n      Player.geometry = new PlaneBufferGeometry(1, 1)\n      // Player.geometry.scale(this.aspectRatio, 1, 1);\n      this.scale.x = this.aspectRatio\n    }\n\n    /** Assign the textures and update the shader uniforms */\n    this.assignTexture(texture)\n    this.updateUniforms()\n\n    /** Create the Mesh/Points and add it to the viewer object */\n    super.add(this.createMesh(Player.geometry, this.material))\n  }\n\n  private createMesh(geo: PlaneBufferGeometry, mat: ShaderMaterial): Mesh {\n    return new Mesh(geo, mat);\n  }\n\n  /** Internal util to assign the textures to the shader uniforms */\n  private assignTexture(tex: Texture): void {\n    this.texture = this.setDefaultTextureProps(tex)\n  }\n\n  private clearDefines(defines: Array<string>): void {\n    defines.forEach(define => {\n      delete this.material.defines[define]\n    })\n    this.material.needsUpdate = true\n  }\n\n  private setShaderDefines(defines: Array<string>): void {\n    defines.forEach(define => {\n      if (define) {\n        this.material.defines[define] = ''\n      }\n    })\n    this.material.needsUpdate = true\n  }\n\n  /** Internal util to set viewer props from config object */\n  private setProps(viewerProps: Props, userProps?: object): void {\n    if (!userProps) return\n\n    /** Iterate over user provided props and assign to viewer props */\n    for (let prop in userProps) {\n      if (prop in viewerProps) {\n        viewerProps[prop] = userProps[prop]\n      } else {\n        console.warn(\n          `SpatialViewer: Provided ${prop} in config but it is not a valid property and wiill be ignored`,\n        )\n      }\n    }\n  }\n\n  private setDefaultTextureProps(texture: Texture): Texture {\n    texture.format = RGBFormat\n    texture.generateMipmaps = true\n    texture.wrapS = RepeatWrapping\n    texture.wrapT = RepeatWrapping\n    return texture\n  }\n\n  private updateUniforms() {\n    this.material.uniforms.quiltStereoEyeDistance.value = this.props.quilt.stereoEyeDistance\n    this.material.uniforms.quiltAngle.value = this.props.quilt.angle\n    this.material.uniforms.quiltColumns.value = this.props.quilt.columns\n    this.material.uniforms.quiltRows.value = this.props.quilt.rows\n  }\n\n  public dispose(): void {\n    if (this.material) { \n      Player.geometry.dispose()\n      this.material.dispose()\n      this.texture.dispose()\n    }\n  }\n\n  public get shaderDefines(): Array<string> {\n    return [SpatialType[this.props.spatialType], \n            \"STEREO_\" + StereoMode[this.props.stereoMode],\n            this.props.stereoMode == StereoMode.OFF ? null : \"STEREO_ON\" ]\n  }\n\n  public get spatial(): SpatialType {\n    return this.props.spatialType\n  }\n\n  public set spatial(val: SpatialType) {\n    this.clearDefines(this.shaderDefines)\n    this.props.spatialType = val\n    this.setShaderDefines(this.shaderDefines)\n  }\n\n  public get stereoMode(): StereoMode {\n    return this.props.stereoMode\n  }\n\n  public set stereoMode(val: StereoMode) {\n    this.clearDefines(this.shaderDefines)\n    this.props.stereoMode = val\n    this.setShaderDefines(this.shaderDefines)\n    this.scale.set(this.aspectRatio, 1, 1)\n  }\n\n  public get aspectRatio(): number {\n    if (this.props.stereoMode == StereoMode.LEFT_RIGHT) {\n      return (this.props.quilt.width * 2.0) / this.props.quilt.height\n    }\n    \n    return this.props.quilt.width / this.props.quilt.height\n  }\n\n  public get quiltAngle(): number {\n    return this.props.quilt.angle\n  }\n\n  public set quiltAngle(val: number) {\n    this.props.quilt.angle = val\n    this.updateUniforms()\n  }\n\n  public get quiltStereoEyeDistance(): number {\n    return this.props.quilt.stereoEyeDistance\n  }\n\n  public set quiltStereoEyeDistance(val: number) {\n    this.props.quilt.stereoEyeDistance = val\n    this.updateUniforms()\n  }\n\n  public get quiltWidth(): number {\n    return this.props.quilt.width\n  }\n\n  public set quiltWidth(val: number) {\n    this.props.quilt.width = val\n    this.updateUniforms()\n  }\n\n  public set quiltHeight(val: number) {\n    this.props.quilt.height = val\n    this.updateUniforms()\n  }\n\n  public get quiltHeight(): number {\n    return this.props.quilt.height\n  }\n\n  public set quiltRows(val: number) {\n    this.props.quilt.rows = val\n    this.updateUniforms()\n  }\n\n  public get quiltRows(): number {\n    return this.props.quilt.rows\n  }\n\n  public set quiltColumns(val: number) {\n    this.props.quilt.columns = val\n    this.updateUniforms()\n  }\n\n  public get quiltColumns(): number {\n    return this.props.quilt.columns\n  }\n\n  public set texture(map: Texture) {\n    this.material.uniforms.colorTexture.value = map\n  }\n\n  public get texture(): Texture {\n    return this.material.uniforms.colorTexture.value\n  }\n\n}\n"],"names":["Uniforms","colorTexture","value","quiltRows","quiltColumns","quiltViewWidth","quiltViewHeight","quiltAngle","quiltStereoEyeDistance","SpatialType","StereoMode","QuiltConfig","angle","stereoEyeDistance","rows","columns","width","height","Props","spatialType","LOOKING_GLASS","quilt","stereoMode","COLOR","Player","Object3D","constructor","texture","depth","props","material","ShaderMaterial","uniforms","vertexShader","vert","fragmentShader","frag","transparent","side","FrontSide","setProps","setShaderDefines","shaderDefines","geometry","PlaneBufferGeometry","scale","x","aspectRatio","assignTexture","updateUniforms","add","createMesh","geo","mat","Mesh","tex","setDefaultTextureProps","clearDefines","defines","forEach","define","needsUpdate","viewerProps","userProps","prop","console","warn","format","RGBFormat","generateMipmaps","wrapS","RepeatWrapping","wrapT","dispose","OFF","spatial","val","set","LEFT_RIGHT","quiltWidth","quiltHeight","map"],"mappings":";;;;;;;;;;EAAO,IAAMA,QAAQ,GAAG;EACtBC,EAAAA,YAAY,EAAE;EACZC,IAAAA,KAAK,EAAE,IAAA;EADK,GADQ;EAItBC,EAAAA,SAAS,EAAE;EACTD,IAAAA,KAAK,EAAE,CAAA;EADE,GAJW;EAOtBE,EAAAA,YAAY,EAAE;EACZF,IAAAA,KAAK,EAAE,CAAA;EADK,GAPQ;EAUtBG,EAAAA,cAAc,EAAE;EACdH,IAAAA,KAAK,EAAE,CAAA;EADO,GAVM;EAatBI,EAAAA,eAAe,EAAE;EACfJ,IAAAA,KAAK,EAAE,CAAA;EADQ,GAbK;EAgBtBK,EAAAA,UAAU,EAAE;EACVL,IAAAA,KAAK,EAAE,CAAA;EADG,GAhBU;EAmBtBM,EAAAA,sBAAsB,EAAE;EACtBN,IAAAA,KAAK,EAAE,CAAA;EADe,GAAA;EAnBF,CAAjB;;ACAFO;;aAAAA;EAAAA,EAAAA,YAAAA;EAAAA,CAAAA,EAAAA,wBAAAA;;AAMAC;;aAAAA;EAAAA,EAAAA,WAAAA;EAAAA,EAAAA,WAAAA;EAAAA,EAAAA,WAAAA;EAAAA,EAAAA,WAAAA;EAAAA,EAAAA,WAAAA;EAAAA,CAAAA,EAAAA,uBAAAA;;EAQL,MAAMC,WAAN,CAAkB;EAAA,EAAA,WAAA,GAAA;EAAA,IACTC,IAAAA,CAAAA,KADS,GACO,CADP,CAAA;EAAA,IAETC,IAAAA,CAAAA,iBAFS,GAEmB,CAFnB,CAAA;EAAA,IAGTC,IAAAA,CAAAA,IAHS,GAGM,CAHN,CAAA;EAAA,IAITC,IAAAA,CAAAA,OAJS,GAIS,CAJT,CAAA;EAAA,IAKTC,IAAAA,CAAAA,KALS,GAKO,GALP,CAAA;EAAA,IAMTC,IAAAA,CAAAA,MANS,GAMQ,GANR,CAAA;EAAA,GAAA;;EAAA,CAAA;;EASlB,MAAMC,KAAN,CAAY;EAAA,EAAA,WAAA,GAAA;EAAA,IAAA,IAAA,CACHC,WADG,GACwBV,mBAAW,CAACW,aADpC,CAAA;EAAA,IAEHC,IAAAA,CAAAA,KAFG,GAEkB,IAFlB,CAAA;EAAA,IAAA,IAAA,CAGHC,UAHG,GAGsBZ,kBAAU,CAACa,KAHjC,CAAA;EAAA,GAAA;;EAAA;;ECJG,MAAMC,MAAN,SAAqBC,cAArB,CAA8B;EAc3CC,EAAAA,WAAW,CAACC,OAAD,EAAmBC,KAAnB,EAAoCC,KAApC,EAAmD;EAC5D,IAAA,KAAA,EAAA,CAAA;EAEA;;EAH4D,IAAA,IAAA,CAZtDA,KAYsD,GAZvC,IAAIX,KAAJ,EAYuC,CAAA;EAAA,IAAA,IAAA,CARtDY,QAQsD,GAR3B,IAAIC,oBAAJ,CAAmB;EACpDC,MAAAA,QAAQ,EAAEhC,QAD0C;EAEpDiC,MAAAA,YAAY,EAAEC,IAFsC;EAGpDC,MAAAA,cAAc,EAAEC,IAHoC;EAIpDC,MAAAA,WAAW,EAAE,IAJuC;EAKpDC,MAAAA,IAAI,EAAEC,eAAAA;EAL8C,KAAnB,CAQ2B,CAAA;EAI5D,IAAA,IAAA,CAAKC,QAAL,CAAc,IAAKX,CAAAA,KAAnB,EAA0BA,KAA1B,CAAA,CAAA;EAEA;;EACA,IAAKY,IAAAA,CAAAA,gBAAL,CAAsB,IAAA,CAAKC,aAA3B,CAAA,CAAA;EAEA;EACJ;EACA;EACA;;EACI,IAAA,IAAI,CAAClB,MAAM,CAACmB,QAAZ,EAAsB;EACpBnB,MAAAA,MAAM,CAACmB,QAAP,GAAkB,IAAIC,yBAAJ,CAAwB,CAAxB,EAA2B,CAA3B,CAAlB,CADoB;;EAGpB,MAAA,IAAA,CAAKC,KAAL,CAAWC,CAAX,GAAe,KAAKC,WAApB,CAAA;EACD,KAAA;EAED;;;EACA,IAAKC,IAAAA,CAAAA,aAAL,CAAmBrB,OAAnB,CAAA,CAAA;EACA,IAAA,IAAA,CAAKsB,cAAL,EAAA,CAAA;EAEA;;EACA,IAAMC,KAAAA,CAAAA,GAAN,CAAU,IAAA,CAAKC,UAAL,CAAgB3B,MAAM,CAACmB,QAAvB,EAAiC,IAAKb,CAAAA,QAAtC,CAAV,CAAA,CAAA;EACD,GAAA;;EAEOqB,EAAAA,UAAU,CAACC,GAAD,EAA2BC,GAA3B,EAAsD;EACtE,IAAA,OAAO,IAAIC,UAAJ,CAASF,GAAT,EAAcC,GAAd,CAAP,CAAA;EACD,GAAA;EAED;;;EACQL,EAAAA,aAAa,CAACO,GAAD,EAAqB;EACxC,IAAA,IAAA,CAAK5B,OAAL,GAAe,IAAA,CAAK6B,sBAAL,CAA4BD,GAA5B,CAAf,CAAA;EACD,GAAA;;EAEOE,EAAAA,YAAY,CAACC,OAAD,EAA+B;EAAA,IAAA,IAAA,KAAA,GAAA,IAAA,CAAA;;EACjDA,IAAAA,OAAO,CAACC,OAAR,CAAgB,UAAAC,MAAM,EAAI;EACxB,MAAA,OAAO,KAAI,CAAC9B,QAAL,CAAc4B,OAAd,CAAsBE,MAAtB,CAAP,CAAA;EACD,KAFD,CAAA,CAAA;EAGA,IAAA,IAAA,CAAK9B,QAAL,CAAc+B,WAAd,GAA4B,IAA5B,CAAA;EACD,GAAA;;EAEOpB,EAAAA,gBAAgB,CAACiB,OAAD,EAA+B;EAAA,IAAA,IAAA,MAAA,GAAA,IAAA,CAAA;;EACrDA,IAAAA,OAAO,CAACC,OAAR,CAAgB,UAAAC,MAAM,EAAI;EACxB,MAAA,IAAIA,MAAJ,EAAY;EACV,QAAA,MAAI,CAAC9B,QAAL,CAAc4B,OAAd,CAAsBE,MAAtB,IAAgC,EAAhC,CAAA;EACD,OAAA;EACF,KAJD,CAAA,CAAA;EAKA,IAAA,IAAA,CAAK9B,QAAL,CAAc+B,WAAd,GAA4B,IAA5B,CAAA;EACD,GAAA;EAED;;;EACQrB,EAAAA,QAAQ,CAACsB,WAAD,EAAqBC,SAArB,EAA+C;EAC7D,IAAI,IAAA,CAACA,SAAL,EAAgB,OAAA;EAEhB;;EACA,IAAA,KAAK,IAAIC,IAAT,IAAiBD,SAAjB,EAA4B;EAC1B,MAAIC,IAAAA,IAAI,IAAIF,WAAZ,EAAyB;EACvBA,QAAAA,WAAW,CAACE,IAAD,CAAX,GAAoBD,SAAS,CAACC,IAAD,CAA7B,CAAA;EACD,OAFD,MAEO;EACLC,QAAAA,OAAO,CAACC,IAAR,CAAA,0BAAA,CAAA,MAAA,CAC6BF,IAD7B,EAAA,gEAAA,CAAA,CAAA,CAAA;EAGD,OAAA;EACF,KAAA;EACF,GAAA;;EAEOR,EAAAA,sBAAsB,CAAC7B,OAAD,EAA4B;EACxDA,IAAAA,OAAO,CAACwC,MAAR,GAAiBC,eAAjB,CAAA;EACAzC,IAAAA,OAAO,CAAC0C,eAAR,GAA0B,IAA1B,CAAA;EACA1C,IAAAA,OAAO,CAAC2C,KAAR,GAAgBC,oBAAhB,CAAA;EACA5C,IAAAA,OAAO,CAAC6C,KAAR,GAAgBD,oBAAhB,CAAA;EACA,IAAA,OAAO5C,OAAP,CAAA;EACD,GAAA;;EAEOsB,EAAAA,cAAc,GAAG;EACvB,IAAA,IAAA,CAAKnB,QAAL,CAAcE,QAAd,CAAuBxB,sBAAvB,CAA8CN,KAA9C,GAAsD,IAAK2B,CAAAA,KAAL,CAAWR,KAAX,CAAiBR,iBAAvE,CAAA;EACA,IAAA,IAAA,CAAKiB,QAAL,CAAcE,QAAd,CAAuBzB,UAAvB,CAAkCL,KAAlC,GAA0C,IAAK2B,CAAAA,KAAL,CAAWR,KAAX,CAAiBT,KAA3D,CAAA;EACA,IAAA,IAAA,CAAKkB,QAAL,CAAcE,QAAd,CAAuB5B,YAAvB,CAAoCF,KAApC,GAA4C,IAAK2B,CAAAA,KAAL,CAAWR,KAAX,CAAiBN,OAA7D,CAAA;EACA,IAAA,IAAA,CAAKe,QAAL,CAAcE,QAAd,CAAuB7B,SAAvB,CAAiCD,KAAjC,GAAyC,IAAK2B,CAAAA,KAAL,CAAWR,KAAX,CAAiBP,IAA1D,CAAA;EACD,GAAA;;EAEM2D,EAAAA,OAAO,GAAS;EACrB,IAAI,IAAA,IAAA,CAAK3C,QAAT,EAAmB;EACjBN,MAAAA,MAAM,CAACmB,QAAP,CAAgB8B,OAAhB,EAAA,CAAA;EACA,MAAK3C,IAAAA,CAAAA,QAAL,CAAc2C,OAAd,EAAA,CAAA;EACA,MAAK9C,IAAAA,CAAAA,OAAL,CAAa8C,OAAb,EAAA,CAAA;EACD,KAAA;EACF,GAAA;;EAEuB,EAAA,IAAb/B,aAAa,GAAkB;EACxC,IAAA,OAAO,CAACjC,mBAAW,CAAC,IAAA,CAAKoB,KAAL,CAAWV,WAAZ,CAAZ,EACC,SAAA,GAAYT,kBAAU,CAAC,KAAKmB,KAAL,CAAWP,UAAZ,CADvB,EAEC,IAAA,CAAKO,KAAL,CAAWP,UAAX,IAAyBZ,kBAAU,CAACgE,GAApC,GAA0C,IAA1C,GAAiD,WAFlD,CAAP,CAAA;EAGD,GAAA;;EAEiB,EAAA,IAAPC,OAAO,GAAgB;EAChC,IAAO,OAAA,IAAA,CAAK9C,KAAL,CAAWV,WAAlB,CAAA;EACD,GAAA;;EAEiB,EAAPwD,IAAAA,OAAO,CAACC,GAAD,EAAmB;EACnC,IAAKnB,IAAAA,CAAAA,YAAL,CAAkB,IAAA,CAAKf,aAAvB,CAAA,CAAA;EACA,IAAA,IAAA,CAAKb,KAAL,CAAWV,WAAX,GAAyByD,GAAzB,CAAA;EACA,IAAKnC,IAAAA,CAAAA,gBAAL,CAAsB,IAAA,CAAKC,aAA3B,CAAA,CAAA;EACD,GAAA;;EAEoB,EAAA,IAAVpB,UAAU,GAAe;EAClC,IAAO,OAAA,IAAA,CAAKO,KAAL,CAAWP,UAAlB,CAAA;EACD,GAAA;;EAEoB,EAAVA,IAAAA,UAAU,CAACsD,GAAD,EAAkB;EACrC,IAAKnB,IAAAA,CAAAA,YAAL,CAAkB,IAAA,CAAKf,aAAvB,CAAA,CAAA;EACA,IAAA,IAAA,CAAKb,KAAL,CAAWP,UAAX,GAAwBsD,GAAxB,CAAA;EACA,IAAKnC,IAAAA,CAAAA,gBAAL,CAAsB,IAAA,CAAKC,aAA3B,CAAA,CAAA;EACA,IAAKG,IAAAA,CAAAA,KAAL,CAAWgC,GAAX,CAAe,KAAK9B,WAApB,EAAiC,CAAjC,EAAoC,CAApC,CAAA,CAAA;EACD,GAAA;;EAEqB,EAAA,IAAXA,WAAW,GAAW;EAC/B,IAAI,IAAA,IAAA,CAAKlB,KAAL,CAAWP,UAAX,IAAyBZ,kBAAU,CAACoE,UAAxC,EAAoD;EAClD,MAAA,OAAQ,IAAKjD,CAAAA,KAAL,CAAWR,KAAX,CAAiBL,KAAjB,GAAyB,GAA1B,GAAiC,IAAKa,CAAAA,KAAL,CAAWR,KAAX,CAAiBJ,MAAzD,CAAA;EACD,KAAA;;EAED,IAAA,OAAO,IAAKY,CAAAA,KAAL,CAAWR,KAAX,CAAiBL,KAAjB,GAAyB,IAAA,CAAKa,KAAL,CAAWR,KAAX,CAAiBJ,MAAjD,CAAA;EACD,GAAA;;EAEoB,EAAA,IAAVV,UAAU,GAAW;EAC9B,IAAA,OAAO,IAAKsB,CAAAA,KAAL,CAAWR,KAAX,CAAiBT,KAAxB,CAAA;EACD,GAAA;;EAEoB,EAAVL,IAAAA,UAAU,CAACqE,GAAD,EAAc;EACjC,IAAA,IAAA,CAAK/C,KAAL,CAAWR,KAAX,CAAiBT,KAAjB,GAAyBgE,GAAzB,CAAA;EACA,IAAA,IAAA,CAAK3B,cAAL,EAAA,CAAA;EACD,GAAA;;EAEgC,EAAA,IAAtBzC,sBAAsB,GAAW;EAC1C,IAAA,OAAO,IAAKqB,CAAAA,KAAL,CAAWR,KAAX,CAAiBR,iBAAxB,CAAA;EACD,GAAA;;EAEgC,EAAtBL,IAAAA,sBAAsB,CAACoE,GAAD,EAAc;EAC7C,IAAA,IAAA,CAAK/C,KAAL,CAAWR,KAAX,CAAiBR,iBAAjB,GAAqC+D,GAArC,CAAA;EACA,IAAA,IAAA,CAAK3B,cAAL,EAAA,CAAA;EACD,GAAA;;EAEoB,EAAA,IAAV8B,UAAU,GAAW;EAC9B,IAAA,OAAO,IAAKlD,CAAAA,KAAL,CAAWR,KAAX,CAAiBL,KAAxB,CAAA;EACD,GAAA;;EAEoB,EAAV+D,IAAAA,UAAU,CAACH,GAAD,EAAc;EACjC,IAAA,IAAA,CAAK/C,KAAL,CAAWR,KAAX,CAAiBL,KAAjB,GAAyB4D,GAAzB,CAAA;EACA,IAAA,IAAA,CAAK3B,cAAL,EAAA,CAAA;EACD,GAAA;;EAEqB,EAAX+B,IAAAA,WAAW,CAACJ,GAAD,EAAc;EAClC,IAAA,IAAA,CAAK/C,KAAL,CAAWR,KAAX,CAAiBJ,MAAjB,GAA0B2D,GAA1B,CAAA;EACA,IAAA,IAAA,CAAK3B,cAAL,EAAA,CAAA;EACD,GAAA;;EAEqB,EAAA,IAAX+B,WAAW,GAAW;EAC/B,IAAA,OAAO,IAAKnD,CAAAA,KAAL,CAAWR,KAAX,CAAiBJ,MAAxB,CAAA;EACD,GAAA;;EAEmB,EAATd,IAAAA,SAAS,CAACyE,GAAD,EAAc;EAChC,IAAA,IAAA,CAAK/C,KAAL,CAAWR,KAAX,CAAiBP,IAAjB,GAAwB8D,GAAxB,CAAA;EACA,IAAA,IAAA,CAAK3B,cAAL,EAAA,CAAA;EACD,GAAA;;EAEmB,EAAA,IAAT9C,SAAS,GAAW;EAC7B,IAAA,OAAO,IAAK0B,CAAAA,KAAL,CAAWR,KAAX,CAAiBP,IAAxB,CAAA;EACD,GAAA;;EAEsB,EAAZV,IAAAA,YAAY,CAACwE,GAAD,EAAc;EACnC,IAAA,IAAA,CAAK/C,KAAL,CAAWR,KAAX,CAAiBN,OAAjB,GAA2B6D,GAA3B,CAAA;EACA,IAAA,IAAA,CAAK3B,cAAL,EAAA,CAAA;EACD,GAAA;;EAEsB,EAAA,IAAZ7C,YAAY,GAAW;EAChC,IAAA,OAAO,IAAKyB,CAAAA,KAAL,CAAWR,KAAX,CAAiBN,OAAxB,CAAA;EACD,GAAA;;EAEiB,EAAPY,IAAAA,OAAO,CAACsD,GAAD,EAAe;EAC/B,IAAKnD,IAAAA,CAAAA,QAAL,CAAcE,QAAd,CAAuB/B,YAAvB,CAAoCC,KAApC,GAA4C+E,GAA5C,CAAA;EACD,GAAA;;EAEiB,EAAA,IAAPtD,OAAO,GAAY;EAC5B,IAAA,OAAO,KAAKG,QAAL,CAAcE,QAAd,CAAuB/B,YAAvB,CAAoCC,KAA3C,CAAA;EACD,GAAA;;EAxM0C,CAAA;EAAxBsB,OAIJmB;;;;;;;;;;;;"}